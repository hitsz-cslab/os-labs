<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>实验概述 - 操作系统2022秋 | 哈工大（深圳）</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "\u5b9e\u9a8c\u6982\u8ff0";
        var mkdocs_page_input_path = "lab4\\part1.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> 操作系统2022秋 | 哈工大（深圳）
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">实验概述</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../..">实验须知</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../env/">实验平台以及环境配置</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tools/">实验实用工具</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Linux/">Linux开发环境基础知识</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../remote_env/">远程实验平台使用指南</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../remote_env_gdb/">远程实验平台环境图形化调试指南</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">常见问题</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../faq/faq-env/">实验环境问题</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../faq/lab1/">Lab1问题</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../faq/lab3/">Lab3问题</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Lab1：XV6与Unix实用程序</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../lab1/part1/">实验概述</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../lab1/part2/">实验原理</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../lab1/part3/">实验步骤</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../lab1/part4/">提交文档</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Lab2：系统调用</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../lab2/part1/">实验概述</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../lab2/part2/">实验原理</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../lab2/part3/">实验实现</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../lab2/part4/">提交文档</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../lab2/part5/">GDB调试系统调用（补充材料）</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Lab3：锁机制的应用</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../lab3/part1/">实验概述</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../lab3/part2/">实验原理</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../lab3/part3/">实验实现</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../lab3/part4/">xv-6中Lock的实现（选读）</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../lab3/part5/">提交文档</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Lab4：页表</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">实验概述</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#0">0.  实验分数</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#1">1.  实验目的</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#2">2.  实验学时</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#3">3.  实验内容及要求</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#31">3.1 任务一：打印页表</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#311">3.1.1 打印函数定义</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#312">3.1.2 结果示例</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#313">3.1.3 测试</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#32">3.2 任务二：独立内核页表（难）</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#321">3.2.1 独立页表的背景</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#322">3.2.2 独立页表的要求</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#323">3.2.3 测试</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#33">3.3 任务三：简化软件模拟地址翻译（很难）</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#331">3.3.1 任务要求</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#332">3.3.2 结果示例</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#34">3.4 测评</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../part2/">实验原理</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../part3/">实验实现</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../part4/">提交文档</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">操作系统2022秋 | 哈工大（深圳）</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Lab4：页表 &raquo;</li><li>实验概述</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="_1">实验概述<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<div class="admonition warning">
<p class="admonition-title">温（守）馨（住）提（红）示（线）</p>
<p>本课程实验已引入代码自动查重系统，请同学们保持<a href="https://integrity.mit.edu/">学术诚信</a>！</p>
</div>
<div class="admonition note">
<p class="admonition-title">课程复习和预习要求</p>
<p>本节实验与理论课的 <strong>“虚拟内存”</strong> 和 <strong>“内存管理”</strong> 这两章课程内容相关，请同学们复习这两章课程内容。</p>
<p>在做实验之前，请同学们阅读<a href="https://pdos.csail.mit.edu/6.828/2020/xv6/book-riscv-rev1.pdf">xv6手册</a>的以下章节及相关源代码：</p>
<ul>
<li>[1] xv6 book, Chapter 3 Page tables (页表)</li>
<li>[2] kernel/memlayout.h （定义内存的布局）</li>
<li>[3] kernel/vm.c （虚拟内存代码）</li>
<li>[4] kernel/kalloc.c （分配和释放物理内存代码）</li>
</ul>
<p>此外，特别推荐同学们观看由我校OS课题组、各级学长助教们合力为大家录制的XV6讲解视频，希望能够让大家对整个XV6系统有一个更为直观的认识，推荐大家按需观看：</p>
<ol>
<li>【HITSZ操作系统课程组讲解XV6（一）启动过程】 <a href="https://www.bilibili.com/video/BV1mK411S7N9?share_source=copy_web&amp;vd_source=225a99017e082147ac525beeddd6e3e2">https://www.bilibili.com/video/BV1mK411S7N9?share_source=copy_web&amp;vd_source=225a99017e082147ac525beeddd6e3e2</a></li>
<li>【HITSZ操作系统课程组讲解XV6（二）进程管理】 <a href="https://www.bilibili.com/video/BV1ge4y1J7Je?share_source=copy_web&amp;vd_source=225a99017e082147ac525beeddd6e3e2">https://www.bilibili.com/video/BV1ge4y1J7Je?share_source=copy_web&amp;vd_source=225a99017e082147ac525beeddd6e3e2</a></li>
<li>【HITSZ操作系统课程组讲解XV6（三）内存管理】 <a href="https://www.bilibili.com/video/BV1Te4y1i77z?share_source=copy_web&amp;vd_source=225a99017e082147ac525beeddd6e3e2">https://www.bilibili.com/video/BV1Te4y1i77z?share_source=copy_web&amp;vd_source=225a99017e082147ac525beeddd6e3e2</a></li>
</ol>
</div>
<div class="admonition info">
<p class="admonition-title">提示</p>
<p>本节实验将探索内核的内存管理模块，并且需要修改相应的部分。建议阅读完所有部分，再开始代码的编写。</p>
</div>
<h2 id="0">0.  实验分数<a class="headerlink" href="#0" title="Permanent link">&para;</a></h2>
<p>本实验有三个任务，作为最后一个MIT xv6实验，任务二和任务三的难度相比之前来说有 <strong>明显提高</strong> ，但是我们希望大家能够尽量完成，如果实在无法完成，也可以给出你的思路，以尽可能拿到分数，即使任务二和任务三的分数占比不高。</p>
<p><strong>1. 实验报告</strong></p>
<ul>
<li>回答实验中的问题 40%；</li>
<li>给出实验设计思路 60%：<ul>
<li>任务一：30%</li>
<li>任务二：20%</li>
<li>任务三：10%</li>
</ul>
</li>
</ul>
<p>若对应任务未给出实验设计，那么对应任务代码分记0分。</p>
<p><strong>2. 实验代码</strong></p>
<ul>
<li>任务一：50%</li>
<li>任务二：30%</li>
<li>任务三：20%</li>
</ul>
<p>若对应任务代码无法通过测试，那么实验报告中对应任务的设计分最高只能得到满分的50%。
因此，即使没有实现，你也应该应该尽可能地给出你的思路。</p>
<h2 id="1">1.  实验目的<a class="headerlink" href="#1" title="Permanent link">&para;</a></h2>
<ol>
<li>了解页表的实现原理。</li>
<li>修改页表，使内核更方便的进行用户虚拟地址翻译。</li>
</ol>
<h2 id="2">2.  实验学时<a class="headerlink" href="#2" title="Permanent link">&para;</a></h2>
<p>本实验为4学时。</p>
<h2 id="3">3.  实验内容及要求<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">请先同步上游远程仓库，并注意切换到pgtbl 分支进行试验</p>
<p>本次实验基于 <strong>pgtbl</strong> 分支，请同学们注意切换。</p>
<p><strong>Step 1.</strong> 首先，保存实验三的代码，请参考实验实用工具的<a href="../../tools/#331">3.3.1 使用命令行完成操作</a>或者<a href="../../tools/#332-vs-code">3.3.2 使用VS Code内建的图形化界面完成操作</a>这两小节，完成commit操作。或者， <strong>如果你希望直接放弃掉上一次commit后的所有更改</strong> ，那么你也可以使用-f选项强制切换分支，例如<code>git checkout -f pgtbl</code>。</p>
<p><strong>Step 2.</strong> 切换的方法可以参考实验 -&gt; 实验实用工具 -&gt; <a href="../../tools/#31">3.1同步上游仓库 ~ 3.3.3 合并冲突更改</a>。</p>
<p>同时，本次实验的 <strong>输出格式不同于MIT原版实验，请严格按照指导书要求！</strong> </p>
</div>
<h3 id="31">3.1 任务一：打印页表<a class="headerlink" href="#31" title="Permanent link">&para;</a></h3>
<p>本任务中，你需要加入页表打印功能，来帮助你在之后的实验中进行debug。</p>
<p>首先，我们需要了解页表的数据结构。然后，按层次每页打印即可，可以采用迭代的算法。</p>
<h4 id="311">3.1.1 打印函数定义<a class="headerlink" href="#311" title="Permanent link">&para;</a></h4>
<p><code>void vmprint(pagetable_t pgtbl)</code></p>
<p>该函数将获取一个 <strong>根页表指针</strong> 作为参数，然后打印对应的页表数据。</p>
<p><strong>函数的使用位置</strong> ：注意！该函数一定要插入在<code>exec()</code>逻辑结束的末尾，来打印第一个进程或刚载入程序的页表数据。在开发过程中，你可以插入到其他的地方，但是最后一定只保留这一个地方的函数使用。</p>
<ul>
<li>在exec.c中的返回argc之前插入vmprint()函数，以输出第一个进程或刚载入程序的页表。其中，vmprin()函数的入参可以根据你自己的设计来填入。</li>
</ul>
<p><img alt="image-20221024121955342" src="../part1.assets/image-20221024121955342.png" /></p>
<h4 id="312">3.1.2 结果示例<a class="headerlink" href="#312" title="Permanent link">&para;</a></h4>
<p>当xv6启动的时候，它自身会调用 <code>exec()</code> 启动第一个进程 <code>init</code> ，这个时候我们的函数会得到以下的输出：</p>
<div class="highlight"><pre><span></span><code><span class="go">xv6 kernel is booting</span>

<span class="go">hart 1 starting</span>
<span class="go">hart 2 starting</span>
<span class="go">page table 0x0000000087f6e000</span>
<span class="go">/* 根页表物理地址：0x0000000087f6e000 */</span>
<span class="go">||0: pte 0x0000000021fda801 pa 0x0000000087f6a000</span>
<span class="go">/* 根页目录项 0，PTE内容为0x0000000021fda801，表示下一级（第二级）页表的PPN物理页帧号为0x87f6a，Flags为0x001，PTE_V有效。该物理页的起始物理地址为0x0000000087f6a000。*/</span>
<span class="go">|| ||0: pte 0x0000000021fda401 pa 0x0000000087f69000</span>
<span class="go">/* 第二级目录项 0，PTE的PPN物理页帧号：0x87f69，Flags为0x001。 */</span>
<span class="go">|| || ||0: pte 0x0000000021fdac1f pa 0x0000000087f6b000</span>
<span class="go">/* 进程的第 0 页，其PPN物理页帧号：0x87f6b，Flags为0x01f，物理块起始地址：0x0000000087f6b000 */</span>
<span class="go">|| || ||1: pte 0x0000000021fda00f pa 0x0000000087f68000</span>
<span class="go">/* 进程的第 1 页，其PPN物理页帧号：0x87f68，Flags为0x00f，物理块起始地址：0x0000000087f68000 */</span>
<span class="go">|| || ||2: pte 0x0000000021fd9c1f pa 0x0000000087f67000</span>
<span class="go">/* 进程的第 2 页，其PPN物理页帧号：0x87f67，Flags为0x01f，物理块起始地址：0x0000000087f67000 */</span>
<span class="go">||255: pte 0x0000000021fdb401 pa 0x0000000087f6d000</span>
<span class="go">/* 根页目录项 255，下一级（第二级）页表的PPN物理页帧号为0x87f6d，Flags为0x001，PTE_V有效。该物理页的起始物理地址为0x0000000087f6d000 */</span>
<span class="go">|| ||511: pte 0x0000000021fdb001 pa 0x0000000087f6c000</span>
<span class="go">/* 第二级目录项 511，PPN物理页帧号为0x87f6c，Flags为0x001 */</span>
<span class="go">|| || ||510: pte 0x0000000021fdd807 pa 0x0000000087f76000</span>
<span class="go">/* 进程的第 510 页，其PPN物理页帧号：0x87f76，Flags为0x007，物理块起始地址：0x0000000087f76000 */</span>
<span class="go">|| || ||511: pte 0x0000000020001c0b pa 0x0000000080007000</span>
<span class="go">/* 进程的第 511 页，其PPN物理页帧号：0x80007，Flags为0x00b，物理块起始地址：0x0000000080007000 */</span>
</code></pre></div>
<p>我们先不着急动手，先看看结果长什么样（不清楚页表的含义先不急，实验原理会告诉你）。</p>
<ul>
<li>第一行打印的是 <code>vmprint</code> 的参数，即获得的页表参数具体的值。</li>
<li>在之后打印的则是页表项。RISC-V的页表被设计成了三层（具体见<a href="../part2/">实验原理</a>），每一个”||“都代表一层。</li>
<li>之后打印的格式为： <code>$index: pte $pte_bits pa $physical_address</code> 。<ul>
<li><code>index</code>:  指示了该页表项在当前等级页表内的序号（取值范围：0-511）；</li>
<li><code>pte_bits</code>：指示了这个页表项的十六进制值（PTE）；</li>
<li><code>physical_address</code>：指示了这个页表项对应的十六进制物理地址；</li>
<li>只打印有效的pte。</li>
</ul>
</li>
</ul>
<p>在上面的示例中，根页表向具有0和255的映射，其中0的次页表只映射了索引0，该索引0映射了叶子页表的0、1和2。</p>
<p>你的代码输出的物理地址与上述示例可能不相同，但显示项数和虚拟地址应相同。</p>
<h4 id="313">3.1.3 测试<a class="headerlink" href="#313" title="Permanent link">&para;</a></h4>
<p>运行<code>make grade</code> ，其中的<code>pte printout</code>测试就是该任务的测试（<a href="#34">可参考测评 3.4</a>）。</p>
<h3 id="32">3.2 任务二：独立内核页表（难）<a class="headerlink" href="#32" title="Permanent link">&para;</a></h3>
<p>目前，xv6的每个进程都有自己独立的 <em>用户页表</em> （只包含该进程用户内存的映射，从虚拟地址0开始），但是每个进程进入内核的时候，会使用唯一的一个 <em>全局共享内核页表</em> 。我们需要 <strong>将全局共享内核页表改成独立内核页表</strong> ，使得每个进程拥有自己独立的内核页表，也就是全局共享内核页表的副本。</p>
<p>这部分有一定的难度，因此指导书会尽可能给出多的描述，大家应反复阅读，并试图将知识点串联起来。</p>
<h4 id="321">3.2.1 独立页表的背景<a class="headerlink" href="#321" title="Permanent link">&para;</a></h4>
<p>共享内核页表中，所有物理地址都和与之完全相等的虚拟地址建立映射，也就是直接映射。这是让内核能够直接以物理地址访问内存的数据，不需要使用任何的虚拟地址。</p>
<p><strong>但是</strong> ，由于用户地址的映射并未存储于内核页表，如果我们需要处理用户程序传来的虚拟地址（比如系统调用传入的指针），我们需要先找到用户页表，逐个页表项地找到能够翻译对应虚拟地址的页表项后，才可以获取实际的物理地址并进行访问，这叫做软件模拟翻译。软件模拟翻译的实现很复杂，同时，因为需要复杂的查找，还降低了性能。</p>
<p>所以我们将 <em>用户页表中的内存映射</em> 和 <em>原来共享内核页表中的内存映射</em> 进行合并，这样内核也能够直接对用户的虚拟地址进行访问，而不需要软件模拟翻译。需要注意的是，这是 <strong>任务三和任务二一同</strong> 需要实现的结果，任务二分离出独立页表，任务三利用独立页表去除软件模拟翻译。</p>
<h4 id="322">3.2.2 独立页表的要求<a class="headerlink" href="#322" title="Permanent link">&para;</a></h4>
<p>共享内核页表的映射：虚实地址相同，也就是直接映射。</p>
<p>独立内核页表的映射：虚实地址相同的映射应该要保留， <strong>先不需要</strong> 加上用户页表的内容，在 <strong>任务三</strong> 中再加上加上用户页表的内容。</p>
<p>同时还需要修改有关的操作。</p>
<h4 id="323">3.2.3 测试<a class="headerlink" href="#323" title="Permanent link">&para;</a></h4>
<p>首先，在xv6运行 <code>kvmtest</code>，如果你确实使用了独立内核页表，会看到以下结果：</p>
<p><img alt="image-20211023161926242" src="../part1.assets/image-20211023161926242-16353841836811.png" /></p>
<p>然后，请在xv6运行 <code>usertests</code>，确保所有测试通过（显示"ALL TESTS PASSED"）。</p>
<h3 id="33">3.3 任务三：简化软件模拟地址翻译（很难）<a class="headerlink" href="#33" title="Permanent link">&para;</a></h3>
<p>xv6目前使用<code>kernel/vm.c</code>中的<code>copyin()/copyinstr()</code>将用户地址空间的数据拷贝至内核地址空间，它们通过软件模拟翻译的方式获取用户空间地址对应的物理地址，然后进行复制（详情见代码注释）。</p>
<p>任务目标：你需要 <strong>在独立内核页表加上用户地址空间的映射，同时将函数 <code>copyin()/copyinstr()</code> 中的软件模拟地址翻译改成直接访问</strong> ，使得内核能够不必花费大量时间，用软件模拟的方法一步一步遍历页表，而是直接利用硬件。</p>
<h4 id="331">3.3.1 任务要求<a class="headerlink" href="#331" title="Permanent link">&para;</a></h4>
<ol>
<li>要求提供了新的函数 <code>copyin_new()/copyinstr_new()</code> （在 <code>kernel/vmcopyin.c</code>中定义）。你需要找到调用 <code>copyin()</code>（在 <code>kernel/vm.c</code> 中定义）的地方，用<code>copyin_new()</code>替换之 。同样地，用<code>copyinstr_new()</code>代替 <code>copyinstr()</code>。</li>
<li>在独立内核页表加上用户页表的映射，以保证刚刚替换地新函数能够使用。但是要注意地址重合问题，见“<a href="../part2/#35">实验原理 3.5</a>”.</li>
</ol>
<h4 id="332">3.3.2 结果示例<a class="headerlink" href="#332" title="Permanent link">&para;</a></h4>
<p>首先，在xv6运行 <code>stats stats</code>，如果你正确使用了copyin_new和copyinstr_new，会看到输出的数值不为零：</p>
<p><img alt="image-20211023162335116" src="../part1.assets/image-20211023162335116-16353873302232.png" /></p>
<p>然后，请在xv6运行 <code>usertests</code>，确保所有测试通过（显示"ALL TESTS PASSED"）。</p>
<h3 id="34">3.4 测评<a class="headerlink" href="#34" title="Permanent link">&para;</a></h3>
<p>当完成上述的三个实验后，在命令行输入 <code>make grade</code> 进行测试。如果通过测试，会显示如下内容：</p>
<p><img alt="image-20211023160155602" src="../part1.assets/image-20211023160155602-16353874445883.png" /></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../lab3/part5/" class="btn btn-neutral float-left" title="提交文档"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../part2/" class="btn btn-neutral float-right" title="实验原理">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy; 2022 - 2023 哈尔滨工业大学（深圳）</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../lab3/part5/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../part2/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../js/baidu-tongji.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
