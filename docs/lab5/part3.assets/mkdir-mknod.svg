<svg width="955" height="607" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" overflow="hidden"><g transform="translate(-122 -78)"><path d="M317.5 87.3334C317.5 83.5595 320.559 80.5001 324.333 80.5001L551.667 80.5001C555.441 80.5001 558.5 83.5595 558.5 87.3334L558.5 114.667C558.5 118.441 555.441 121.5 551.667 121.5L324.333 121.5C320.559 121.5 317.5 118.441 317.5 114.667Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(365.349 109)">mkdir</text><text font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(431.182 109)">/</text><text font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(444.349 109)">mknod</text><rect x="317.5" y="147.5" width="241" height="74" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF"/><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(329.721 178)">路径解析，获取父目</text><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(334.488 206)">录目录项</text><text font-family="Calibri,Calibri_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(430.488 206)">last_dentry</text><path d="M0.333333-0.000560355 0.366535 19.7502-0.30013 19.7513-0.333333 0.000560355ZM-3.99999 0.00672426C-4.00371-2.20241-2.21586-3.99628-0.00672426-3.99999 2.20241-4.00371 3.99628-2.21586 3.99999-0.00672426 4.00371 2.20241 2.21586 3.99628 0.00672426 3.99999-2.20241 4.00371-3.99628 2.21586-3.99999 0.00672426ZM4.03095 18.4107 0.0444094 26.4174-3.96903 18.4242Z" transform="matrix(-1 0 0 1 438.544 121.5)"/><path d="M317.5 283.5 438 253.5 558.5 283.5 438 313.5Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(384.138 292)">文件存在</text><text font-family="Calibri,Calibri_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(480.138 292)">?</text><rect x="317.5" y="349.5" width="241" height="103" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF"/><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(324.268 380)">根据请求创建的文件</text><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(321.521 408)">类型</text><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(369.521 408)">创建</text><text font-family="Calibri,Calibri_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(417.521 408)">dentry</text><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(481.921 408)">结构，</text><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(336.268 437)">并添加到父目录中</text><rect x="317.5" y="526.5" width="241" height="73" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF"/><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(341.721 557)">分配新的索引节点</text><text font-family="Calibri,Calibri_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(409.974 585)">inode</text><rect x="642.5" y="157.5" width="432" height="55" stroke="#000000" stroke-width="1.33333" stroke-linejoin="round" stroke-miterlimit="10" stroke-dasharray="5.33333 4" fill="#FFFFFF"/><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(651.796 180)">last_dentry</text><text fill="#333333" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(775.796 180)">=</text><text fill="#AA3731" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(796.463 180)">sfs_lookup</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(899.796 180)">(</text><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(910.13 180)">path</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(951.463 180)">,</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(972.13 180)">&amp;</text><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(982.463 180)">is_find</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(1054.8 180)">,</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(651.796 202)">&amp;</text><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(662.13 202)">is_root</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(734.463 202)">);</text><path d="M438.833 221.5 438.833 246.564 438.167 246.564 438.167 221.5ZM434.5 221.5C434.5 219.291 436.291 217.5 438.5 217.5 440.709 217.5 442.5 219.291 442.5 221.5 442.5 223.709 440.709 225.5 438.5 225.5 436.291 225.5 434.5 223.709 434.5 221.5ZM442.5 245.23 438.5 253.23 434.5 245.23Z"/><path d="M0.333333-9.8216e-07 0.333419 28.9646-0.333248 28.9646-0.333333 9.8216e-07ZM-4 1.17859e-05C-4.00001-2.20913-2.20915-3.99999-1.17859e-05-4 2.20913-4.00001 3.99999-2.20915 4-1.17859e-05 4.00001 2.20913 2.20915 3.99999 1.17859e-05 4-2.20913 4.00001-3.99999 2.20915-4 1.17859e-05ZM4.00008 27.6313 0.000104987 35.6313-3.99992 27.6313Z" transform="matrix(-1 0 0 1 438.5 313.5)"/><path d="M438.833 452.5 438.833 519.685 438.167 519.685 438.167 452.5ZM434.5 452.5C434.5 450.291 436.291 448.5 438.5 448.5 440.709 448.5 442.5 450.291 442.5 452.5 442.5 454.709 440.709 456.5 438.5 456.5 436.291 456.5 434.5 454.709 434.5 452.5ZM442.5 518.352 438.5 526.352 434.5 518.352Z"/><rect x="642.5" y="300.5" width="432" height="213" stroke="#000000" stroke-width="1.33333" stroke-linejoin="round" stroke-miterlimit="10" stroke-dasharray="5.33333 4" fill="#FFFFFF"/><text fill="#4B69C6" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(651.796 322)">if</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(682.796 322)">(</text><text fill="#AA3731" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(693.13 322)">S_ISREG</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(765.463 322)">(</text><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(775.796 322)">mode</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(817.13 322)">))</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(848.13 322)">{</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(941.13 322)">// =&gt;</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(1003.13 322)">mknod</text><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(693.13 344)">dentry</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(765.463 344)">=</text><text fill="#AA3731" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(786.13 344)">new_dentry</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(889.463 344)">(</text><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(899.796 344)">fname</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(951.463 344)">,</text><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(972.13 344)">FILE</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(1013.46 344)">);</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(651.796 366)">}</text><text fill="#4B69C6" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(672.463 366)">else</text><text fill="#4B69C6" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(724.13 366)">if</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(755.13 366)">(</text><text fill="#AA3731" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(765.463 366)">S_ISDIR</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(837.796 366)">(</text><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(848.13 366)">mode</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(889.463 366)">))</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(920.463 366)">{</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(941.13 366)">// =&gt;</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(1003.13 366)">mkdir</text><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(693.13 389)">dentry</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(765.463 389)">=</text><text fill="#AA3731" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(786.13 389)">new_dentry</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(889.463 389)">(</text><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(899.796 389)">fname</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(951.463 389)">,</text><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(972.13 389)">DIR</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(1003.13 389)">);</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(651.796 411)">}</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(651.796 434)">...</text><text fill="#AA3731" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(651.796 456)">sfs_alloc_dentry</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(817.13 456)">(</text><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(827.463 456)">last_dentry</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(941.13 456)">-</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(951.463 456)">&gt;</text><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(961.796 456)">inode</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(1013.46 456)">,</text><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(651.796 478)">dentry</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(713.796 478)">);</text><path d="M642.5 87.3335C642.5 83.5595 645.559 80.5001 649.333 80.5001L1067.67 80.5001C1071.44 80.5001 1074.5 83.5595 1074.5 87.3335L1074.5 114.667C1074.5 118.441 1071.44 121.5 1067.67 121.5L649.333 121.5C645.559 121.5 642.5 118.441 642.5 114.667Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(686.998 109)">sfs_mkdir</text><text font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(805.498 109)">/</text><text font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(818.665 109)">sfs_mknod</text><text font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(937.165 109)">:</text><text font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(963.498 109)">sfs.c</text><path d="M588 200.5 573.5 186 588 171.5 588 178.75 613 178.75 613 171.5 627.5 186 613 200.5 613 193.25 588 193.25Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><path d="M588 415.5 573.5 401 588 386.5 588 393.75 613 393.75 613 386.5 627.5 401 613 415.5 613 408.25 588 408.25Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><path d="M858.833 121.5 858.833 150.833 858.167 150.833 858.167 121.5ZM854.5 121.5C854.5 119.291 856.291 117.5 858.5 117.5 860.709 117.5 862.5 119.291 862.5 121.5 862.5 123.709 860.709 125.5 858.5 125.5 856.291 125.5 854.5 123.709 854.5 121.5ZM862.5 149.5 858.5 157.5 854.5 149.5Z"/><path d="M858.833 212.5 858.833 293.605 858.167 293.605 858.167 212.5ZM854.5 212.5C854.5 210.291 856.291 208.5 858.5 208.5 860.709 208.5 862.5 210.291 862.5 212.5 862.5 214.709 860.709 216.5 858.5 216.5 856.291 216.5 854.5 214.709 854.5 212.5ZM862.5 292.271 858.5 300.271 854.5 292.271Z"/><rect x="642.5" y="547.5" width="432" height="32" stroke="#000000" stroke-width="1.33333" stroke-linejoin="round" stroke-miterlimit="10" stroke-dasharray="5.33333 4" fill="#FFFFFF"/><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(651.796 569)">inode</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(713.796 569)">=</text><text fill="#AA3731" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(734.463 569)">sfs_alloc_inode</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(889.463 569)">(</text><text fill="#7A3E9D" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(899.796 569)">dentry</text><text fill="#777777" font-family="Consolas,Consolas_MSFontService,sans-serif" font-weight="400" font-size="19" transform="translate(961.796 569)">);</text><path d="M588 578.5 573.5 564 588 549.5 588 556.75 613 556.75 613 549.5 627.5 564 613 578.5 613 571.25 588 571.25Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><path d="M317.5 642.333C317.5 638.559 320.559 635.5 324.333 635.5L551.667 635.5C555.441 635.5 558.5 638.559 558.5 642.333L558.5 669.667C558.5 673.441 555.441 676.5 551.667 676.5L324.333 676.5C320.559 676.5 317.5 673.441 317.5 669.667Z" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF" fill-rule="evenodd"/><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(413.677 664)">结束</text><path d="M0.333333-0.000415587 0.369326 28.8686-0.29734 28.8694-0.333333 0.000415587ZM-4 0.00498704C-4.00275-2.20415-2.21412-3.99724-0.00498704-4 2.20415-4.00275 3.99724-2.21412 4-0.00498704 4.00275 2.20415 2.21412 3.99724 0.00498704 4-2.20415 4.00275-3.99724 2.21412-4 0.00498704ZM4.03433 27.5307 0.0443045 35.5356-3.96567 27.5406Z" transform="matrix(-1 0 0 1 438.544 599.5)"/><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(447.149 341)">否</text><path d="M317.96 284.299 269.164 283.889 269.169 283.223 317.966 283.632ZM317.996 279.965C320.205 279.984 321.981 281.79 321.963 283.999 321.944 286.208 320.138 287.984 317.929 287.965 315.72 287.947 313.944 286.141 313.963 283.932 313.981 281.723 315.787 279.947 317.996 279.965ZM270.466 287.567 262.5 283.5 270.533 279.567Z"/><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(283.147 271)">是</text><rect x="123.5" y="252.5" width="139" height="61" stroke="#000000" stroke-width="1.33333" stroke-miterlimit="8" fill="#FFFFFF"/><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(144.501 277)">异常情况</text><text font-family="Microsoft YaHei,Microsoft YaHei_MSFontService,sans-serif" font-weight="400" font-size="24" transform="translate(144.501 305)">自行处理</text></g></svg>